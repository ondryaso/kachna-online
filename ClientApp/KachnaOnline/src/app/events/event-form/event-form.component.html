<!--
event-form.component.html
Author: David Chocholatý
-->

<form novalidate autocomplete="off" [formGroup]="form" (ngSubmit)="onSubmit()">
  <input type="hidden" id="id" class="form-control" formControlName="id">

  <div class="form-group">
    <label>Název (povinné)</label>

    <input class="form-control form-control-lg" placeholder="Název akce" id="name"
           formControlName="name"
           required maxlength="128" [class.is-invalid]="!form.value.name">
  </div>

  <div class="form-row">
    <div class="form-group col-md-6">
      <label>Místo konání</label>
      <input class="form-control form-control-lg" placeholder="Místo konání akce" name="place"
             formControlName="place"
             maxlength="256">
    </div>

    <div class="form-group col-md-6">
      <label>URL místa konání</label>
      <input class="form-control form-control-lg" placeholder="URL místa konání akce" name="placeUrl"
             formControlName="placeUrl"
             maxlength="512">
    </div>
  </div>

  <div class="form-group">
    <label for="file">Obrázek akce<a *ngIf="image" href="{{image}}">, současný obrázek</a></label>
    <input class="form-control" type="file" id="file" accept=".jpg,.jpeg" (change)="imageChanged($event)">
  </div>

  <div class="form-group">
    <label>Krátký popis (povinné)</label>
    <textarea class="form-control form-control-lg" placeholder="Krátký popis akce" name="shortDescription"
              formControlName="shortDescription"
              required maxlength="512" [class.is-invalid]="!form.value.shortDescription"></textarea>
  </div>

  <div class="form-group">
    <label>Podrobný popis</label>
    <textarea class="form-control form-control-lg" placeholder="Podrobný popis akce" name="fullDescription"
              formControlName="fullDescription"
    ></textarea>
  </div>

  <div class="form-group">
    <label>URL</label>
    <input class="form-control form-control-lg" placeholder="URL akce" name="url"
           formControlName="url"
           maxlength="512">
  </div>

  <div class="d-flex flex-nowrap flex-row justify-content-between">
    <div class="form-group d-flex align-items-center">
      <label>Trvání od (povinné)</label>

      <div class="input-group mx-3">
        <input class="form-control" [minDate]="calendar.getToday()" (click)="fromDate.open()" type="text" ngbDatepicker
               #fromDate="ngbDatepicker" id="fromDate" formControlName="fromDate"
               placeholder="dd. MM. yyyy" autocomplete="false" required
               [class.is-invalid]="!form.value.fromDate"/>
        <div class="input-group-append">
          <button class="btn btn-outline-secondary calendar" (click)="fromDate.toggle()" type="button"><i
            class="far fa-calendar"></i></button>
        </div>
      </div>

      <ngb-timepicker formControlName="fromTime" required
                      [class.is-invalid]="!form.value.fromTime || form.value.fromTime.invalid"></ngb-timepicker>
    </div>

    <div class="form-group d-flex align-items-center">
      <div class="form-row">
        <label>Trvání do</label>
        <div style="color: grey;">(povinné)</div>
      </div>
      <div class="input-group mx-3">
        <input class="form-control" [minDate]="calendar.getToday()" (click)="toDate.open()" type="text" ngbDatepicker
               #toDate="ngbDatepicker" id="toDate" formControlName="toDate"
               placeholder="dd. MM. yyyy" autocomplete="false" required
               [class.is-invalid]="!form.value.toDate"/>
        <div class="input-group-append">
          <button class="btn btn-outline-secondary" (click)="toDate.toggle()" type="button"><i
            class="far fa-calendar"></i></button>
        </div>
      </div>

      <ngb-timepicker formControlName="toTime" required [class.is-invalid]="!form.value.toTime"></ngb-timepicker>
    </div>
  </div>

  <div class="d-flex flex-wrap justify-content-between">
    <div class="form-group mr-4 mt-3">
      <button class="btn btn-info btn-lg btn-block" type="submit" [disabled]="form.invalid">{{submitText}}</button>
    </div>
    <div class="form-group mr-4 mt-3" *ngIf="editMode">
      <button class="btn btn-info btn-lg btn-block" type="button" (click)="onManageLinkedStatesClicked()">
        Spravovat připojené stavy klubu
      </button>
    </div>
    <div class="form-group mt-3" *ngIf="editMode">
      <button class="btn btn-info btn-lg btn-block" type="button" (click)="form.reset()">Smazat</button>
    </div>
  </div>
</form>
